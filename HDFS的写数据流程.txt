1.首先创建一个客户端。分布式文件系统。

2.向namenode请求上传文件 --响应可以上传文件
2.1检查权限 2.2.检查目录结构（目录是否存在）


3. 请求上传第一个Block，告诉文件上传在哪个datanode.

4.返回dn1,dn2,dn3节点，表示采用这三个节点存储数据
4.1本地节点 4.2其他机架一个节点 4.3其他机架的另一个节点


5.请求建立Block传输通道-请求建立通道-请求建立通道

6.dn3应答成功 -dn2应答成功- dn1应答成功 

7.传输数据 Packet(64k) 磁盘内写一份数据，用内存发送
packet(chunk512byte+chunksum4byte)


网络拓扑-节点距离结算
节点距离：两个节点到达最近的共同祖先的距离之和